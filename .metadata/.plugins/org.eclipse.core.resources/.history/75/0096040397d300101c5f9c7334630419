package com.project.demo;


import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.scheduling.annotation.EnableScheduling;

import com.project.demo.service.FhirService;

@SpringBootApplication
@EnableScheduling 
public class DemoApplication {
	
	public static void main(String[] args) {
		SpringApplication.run(DemoApplication.class, args);
	}
	
	 @Bean
	    CommandLineRunner run(FhirService fhirService) {
	        return args -> {
	            System.out.println("\n" + "=".repeat(60));
	            System.out.println("   FHIR LOCAL SERVER DEMO");
	            System.out.println("   Ø§Ù„Ø³ÙŠØ±ÙØ±: http://localhost:8080/fhir");
	            System.out.println("=".repeat(60));
	            
	            // Ø§Ù†ØªØ¸Ø± Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
	            Thread.sleep(3000);
	            
	            // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
	            System.out.println("\nğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±Ø¶Ù‰ ØªØ¬Ø±ÙŠØ¨ÙŠÙŠÙ†");
	            fhirService.createSamplePatients();
	            
	            Thread.sleep(1000);
	            
	            // 2. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¶Ù‰
	            System.out.println("\nğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¶Ù‰");
	            fhirService.testSearch();
	            
	            Thread.sleep(1000);
	            
	            // 3. Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¹Ø§Ø¦Ù„Ø© Ù…Ø¹ÙŠÙ†Ø©
	            System.out.println("\nğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¹Ø§Ø¦Ù„Ø© 'Ø¹Ù„ÙŠ'");
	            fhirService.searchWithCriteria("Ø¹Ù„ÙŠ");
	            
	            System.out.println("\n" + "=".repeat(60));
	            System.out.println("   âœ… Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­!");
	            System.out.println("=".repeat(60));
	            
	            System.out.println("\nğŸŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰:");
	            System.out.println("   1. ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±: http://localhost:8080");
	            System.out.println("   2. Ù†Ù‚Ø·Ø© Ù†Ù‡Ø§ÙŠØ© FHIR: http://localhost:8080/fhir");
	            System.out.println("   3. ÙˆØ§Ø¬Ù‡Ø© REST API: http://localhost:8081/api/fhir");
	            
	            System.out.println("\nğŸ“‹ Ø£Ù…Ø«Ù„Ø© API:");
	            System.out.println("   GET  http://localhost:8081/api/fhir/test");
	            System.out.println("   GET  http://localhost:8081/api/fhir/search");
	            System.out.println("   POST http://localhost:8081/api/fhir/patient");
	            System.out.println("   GET  http://localhost:8081/api/fhir/search/Ø¹Ù„ÙŠ");
	        };
	    }}
