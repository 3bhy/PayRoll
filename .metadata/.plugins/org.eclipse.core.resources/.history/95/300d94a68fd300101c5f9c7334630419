package com.project.demo;


import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.scheduling.annotation.EnableScheduling;

import com.project.demo.service.FhirService;

@SpringBootApplication
@EnableScheduling 
public class DemoApplication {
	
	public static void main(String[] args) {
		SpringApplication.run(DemoApplication.class, args);
	}
	
	 @Bean
	    CommandLineRunner run(FhirService fhirService) {
	        return args -> {
	            System.out.println("\n" + "=".repeat(60));
	            System.out.println("   FHIR CLIENT DEMO - ØªØ¬Ø±Ø¨Ø© Ø¹Ù…ÙŠÙ„ FHIR");
	            System.out.println("=".repeat(60));
	            
	            // Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
	            Thread.sleep(3000);
	            
	            // 1. Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ø§Ù…
	            System.out.println("\nğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø±Ø¶Ù‰");
	            fhirService.testSearch();
	            
	            // Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹
	            Thread.sleep(2000);
	            
	            // 2. Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¹Ø§Ø¦Ù„Ø© Ù…Ø¹ÙŠÙ†Ø©
	            System.out.println("\nğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¹Ø§Ø¦Ù„Ø© 'Smith'");
	            fhirService.searchWithCriteria("Smith");
	            
	            // Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹
	            Thread.sleep(2000);
	            
	            // 3. Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ÙŠØ¶ (Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©)
	            System.out.println("\nğŸ¯ Ø§Ù„Ø®Ø·ÙˆØ© 3: Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ÙŠØ¶ ØªØ¬Ø±ÙŠØ¨ÙŠ");
	            fhirService.createSamplePatient();
	            
	            System.out.println("\n" + "=".repeat(60));
	            System.out.println("   âœ… Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­!");
	            System.out.println("=".repeat(60));
	            
	            System.out.println("\nğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:");
	            System.out.println("1. Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù‚Ø¯ Ù„Ø§ ØªØ³Ù…Ø­ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ§Ø±Ø¯ Ø¬Ø¯ÙŠØ¯Ø©");
	            System.out.println("2. Ù„Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŒ Ø´ØºÙ„ Ø³ÙŠØ±ÙØ± HAPI FHIR Ù…Ø­Ù„ÙŠØ§Ù‹:");
	            System.out.println("   docker run -p 8080:8080 hapiproject/hapi:v5.7.0");
	            System.out.println("3. Ø«Ù… Ø§Ø³ØªØ®Ø¯Ù…: http://localhost:8080/fhir");
	        };
	    }
}
