package com.project.demo;


import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.scheduling.annotation.EnableScheduling;

import com.project.demo.service.FhirService;

@SpringBootApplication
@EnableScheduling 
public class DemoApplication {
	
	public static void main(String[] args) {
		SpringApplication.run(DemoApplication.class, args);
	}
	
	 @Bean
	    CommandLineRunner run(FhirService fhirService) {
	        return args -> {
	            System.out.println("\n" + "=".repeat(60));
	            System.out.println("   FHIR DEMO APPLICATION - Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„");
	            System.out.println("=".repeat(60));
	            
	            // Ø§Ù†ØªØ¸Ø± 3 Ø«ÙˆØ§Ù† Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
	            System.out.println("â³ Ø§Ù†ØªØ¸Ø± 3 Ø«ÙˆØ§Ù† Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„...");
	            Thread.sleep(3000);
	            
	            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©
	            String status = fhirService.getServiceStatus();
	            System.out.println("ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø¯Ù…Ø©: " + status);
	            
	            // ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ø¬Ø§Ù‡Ø²Ø©ØŒ Ù†ÙØ° Ø§Ù„Ø¨Ø­Ø«
	            if (status.contains("âœ…")) {
	                System.out.println("\nâš¡ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø±Ø¶Ù‰...");
	                fhirService.searchPatients();
	            } else {
	                System.err.println("\nâŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŒ Ø§Ù„Ø®Ø¯Ù…Ø© ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø©");
	                System.err.println("   ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø£Ø¹Ù„Ø§Ù‡ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„");
	            }
	            
	            System.out.println("\n" + "=".repeat(60));
	            System.out.println("   Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªØ´ØºÙŠÙ„");
	            System.out.println("=".repeat(60));
	        };
	    }

}
